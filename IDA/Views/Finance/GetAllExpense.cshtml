
@using System.Data
@{
    ViewBag.Title = "GetAllExpense";
    Layout = "~/Views/Shared/FinanceManagerLayout.cshtml";
}
<head>
    <!-- DataTables CSS -->
    <link href="css/addons/datatables2.min.css" rel="stylesheet">
    <link href="~/MD/css/addons/datatables.min.css" rel="stylesheet" />
    <!-- DataTables JS -->
    <script src="js/addons/datatables2.min.js" type="text/javascript"></script>

    <script src="~/MD/js/addons/datatables2.min.js"></script>


</head>
<html>
<body>
    <main class="pt-5 mx-lg-5">
        <div class="container-fluid mt-5">
            <div class="container-fluid mt-5">
                <div class="card mb-4 wow fadein">
                    <div class="card-body d-sm-flex justify-content-between">

                        <h4 class="mb-2 mb-sm-0 pt-1">


                            <!--Simple badges-->

                            <span style=" color: orangered;">Expenditure</span>
                        </h4>

                        <form class="d-flex justify-content-center">
                        </form>

                    </div>

                </div>
                <!-- Heading -->
                <!-- Heading -->
                <!--Grid row-->
                <div class="row wow fadeIn">

                    <!--Grid column-->
                    <div class="col-md-12 mb-4">
                        <!--Card-->
                        <div class="card">

                            <div class="card-body">
                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@@getbootstrap" style="margin-left:20px;position:absolute;top: 0px;right: 0px;">Add Expense</button>
                                @*<a href="#" class="btn btn-primary" style="margin-left:20px;position:absolute;top: 0px;right: 0px;"><i class="fa fa-print" aria-hidden="true"></i>print</a>*@
                                <div class="dropdown">
                                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" style="margin-left:20px;position:absolute;top: -18px;right: 200px;">
                                        Select Expenditure
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><a href="/FinanceManager/MonthExpense">Monthly</a></li>
                                        <li><a href="/FinanceManager/YearlyExpenses">Yearly</a></li>

                                    </ul>
                                </div>
                                <br />
                                <br />
                                <br />
                                <table id="dt-filter-select" class="table table-striped table-bordered" cellspacing="0" width="100%">
                                    <thead>
                                        <tr>
                                            <th class="th-sm">
                                                Email
                                            </th>
                                            <th class="th-sm">
                                                Project name
                                            </th>

                                            <th class="th-sm">
                                                Amount
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.Rows)
                                        {
                                            <tr>
                                                <td> @row["Email"]</td>
                                                <td> @row["ProjectName"]</td>
                                                <td>@row["Salary"]</td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>
                                                Email
                                            </th>
                                            <th>
                                                ProjectName
                                            </th>

                                            <th>
                                                Salary
                                            </th>
                                        </tr>
                                    </tfoot>
                                </table>

                            </div>


                        </div>
                        <!--/.Card-->

                    </div>
                    <!--Grid column-->
                </div>
            </div>
        </div>
        <!---Modal-->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <strong><center><h5 class="modal-title" id="exampleModalLabel"> Add Expense </h5></center></strong>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="AddExpense">

                            <div class="input-group mb-3" name="EmpId" id="EmpId">
                                <div class="input-group-prepend">
                                    <label class="input-group-text" for="inputGroupSelect01">Email</label>
                                </div>
                                @Html.DropDownList("EmpId", ViewBag.ChooseEmp as SelectList, "---- CHOOSE EMPLOYEE----", new { @onChange = "selectedText2(this)", @class = "form-control", @required = true })
                            </div>

                            <div class="input-group mb-3" name="ProjectId" id="ProjectId">
                                <div class="input-group-prepend">
                                    <label class="input-group-text" for="inputGroupSelect01">Item</label>
                                </div>
                                @Html.DropDownList("ProjectId", ViewBag.GetProject as SelectList, "---- CHOOSE PROJECT----", new { @onChange = "selectedText2(this)", @class = "form-control", @required = true })
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <label class="input-group-text" for="inputGroupSelect01">Amount</label>
                                </div>
                                <input class="form-control" id="salary" name="salary"></input>
                            </div>

                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" onclick="SaveFormz()">Submit</button>
                    </div>
                </div>
            </div>
        </div>




        <!---Modal For Notification-->


        <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <strong><center><h5 class="modal-title" id="exampleModalLabel"><img src="~/Content/images/notification-flat.png" height="30px" /><b style="color:orangered;">Notifications</b> </h5></center></strong>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="card mb-4 wow fadein">
                        <div class="card-body d-sm-flex justify-content-between">



                            <form class="d-flex justify-content-center">

                                @*<table id="dt-filter-selects" class="table table-striped table-bordered" cellspacing="0" width="100%">
                                        <thead>
                                            <tr>
                                                <th class="th-sm">
                                                    All Notifications
                                                </th>


                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr>
                                                <td>
                                                    <h5 class="mb-2 mb-sm-0 pt-1">

                                                        <span style=" color: orangered;"> Assinged Project Manager<a href="LINK" data-toggle="tooltip" title="Project Manager notification"> @ViewBag.GetNotify </a></span><br />
                                                    </h5>
                                                    <hr />
                                                    <h5 class="mb-2 mb-sm-0 pt-1">

                                                        <span style=" color: orangered;">Bookings<a href="LINK" data-toggle="tooltip" title="Project Manager notification"> @ViewBag.GetNotify </a></span><br />
                                                    </h5>
                                                </td>


                                            </tr>

                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th>
                                                    Project Manager
                                                </th>

                                            </tr>
                                        </tfoot>
                                    </table>*@

                                <div class="accordion" id="accordionExample">
                                    <div class="card">
                                        <div class="card-header" id="headingOne">
                                            <h2 class="mb-0">
                                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                                    <span style=" color: orangered;">Bookings<a href="LINK" data-toggle="tooltip" title="Project Manager notification">@ViewData["GetTotalNotifications"] </a></span><br />
                                                </button>
                                            </h2>
                                        </div>


                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingTwo">
                                            <h2 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                    <span style=" color: orangered;">Meetings<a href="LINK" data-toggle="tooltip" title="Project Manager notification"> @ViewData["GetTotalNotifications"] </a></span><br />
                                                </button>
                                            </h2>
                                        </div>

                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingThree">
                                            <h2 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                                    <span style=" color: orangered;">New project<a href="LINK" data-toggle="tooltip" title="Project Manager notification"> @ViewData["GetTotalNotifications"] </a></span><br />
                                                </button>
                                            </h2>
                                        </div>

                                    </div>
                                </div>

                            </form>

                        </div>

                    </div>


                </div>
            </div>
        </div>


        <link href="css/addons/datatables-select2.min.css" rel="stylesheet">
        <link href="~/MD/css/addons/datatables-select2.min.css" rel="stylesheet" />
        <!-- DataTables Select JS -->
        <script src="js/addons/datatables-select2.min.js" type="text/javascript"></script>
        <script src="~/MD/js/addons/datatables-select2.min.js"></script>
        <script>
            $(document).ready(function () {
                $('#dt-filter-select').dataTable({

                    initComplete: function () {
                        this.api().columns().every(function () {
                            var column = this;
                            var select = $('<select  class="browser-default custom-select form-control-sm"><option value="" selected>Search</option></select>')
                                .appendTo($(column.footer()).empty())
                                .on('change', function () {
                                    var val = $.fn.dataTable.util.escapeRegex(
                                        $(this).val()
                                    );

                                    column
                                        .search(val ? '^' + val + '$' : '', true, false)
                                        .draw();
                                });

                            column.data().unique().sort().each(function (d, j) {
                                select.append('<option value="' + d + '">' + d + '</option>')
                            });
                        });
                    }
                });
            });
            // Get the modal
            var modal = document.getElementById('id01');

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }


             $(document).ready(function () {
                $('#dt-filter-selects').dataTable({

                    initComplete: function () {
                        this.api().columns().every(function () {
                            var column = this;
                            var select = $('<select  class="browser-default custom-select form-control-sm"><option value="" selected>Search</option></select>')
                                .appendTo($(column.footer()).empty())
                                .on('change', function () {
                                    var val = $.fn.dataTable.util.escapeRegex(
                                        $(this).val()
                                    );

                                    column
                                        .search(val ? '^' + val + '$' : '', true, false)
                                        .draw();
                                });

                            column.data().unique().sort().each(function (d, j) {
                                select.append('<option value="' + d + '">' + d + '</option>')
                            });
                        });
                    }
                });
            });
            // Get the modal
            var modal = document.getElementById('id01');

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        </script>
    </main>

</body>
</html>
<script>
      function SaveFormz() {

        var sta = $("EmpId").val();
        var Pro = $("ProjectId").val();
        var Pro = $("#salary").val();
        var data = $("#AddExpense").serialize();
        $.ajax({
            type: "post",
            data: data,
            url: "/Finance/AddExpen",
            success: function (result) {
                alert(result);
            }
        });
    }
    $("#badgevisibility").hide();
$(".clickme").click(function() {
$("#badgevisibility").fadeToggle(300);
});
</script>